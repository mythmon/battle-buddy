(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{295:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return l});var n=a(320);function r(e){return e.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join(" ")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return Object.keys(t).every(function(a){return Object(n.a)(e,a)===t[a]})})||{}}},296:function(e,t,a){"use strict";var n=new(a(321).a)({protocol:"https"});t.a=n},299:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(0),r=a.n(n),l=a(128),c=a(401),i=a(295);a(304);function o(e){var t=e.type;return r.a.createElement(l.a,{as:"span",className:"type ".concat(t)},r.a.createElement("span",{className:"inner"},Object(i.b)(t)))}o.Placeholder=function(){return r.a.createElement(c.a,{className:"type placeholder",as:"span"})}},303:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(0),r=a.n(n),l=a(403),c=a(386),i=a(92);function o(e){var t=e.error;return t?r.a.createElement(l.a,{textAlign:"center",inverted:!0,color:"red"},r.a.createElement(c.a,{icon:!0},r.a.createElement(i.a,{name:"exclamation"}),"Something has gone terribly wrong."),r.a.createElement("p",null,t.description),t.source&&r.a.createElement("p",{className:"subtle"},t.source.toString())):null}},304:function(e,t,a){},306:function(e,t,a){"use strict";a.d(t,"a",function(){return S});var n=a(309),r=a(297),l=a.n(r),c=a(322),i=a(298),o=a(73),u=a(74),s=a(79),p=a(75),m=a(78),f=a(6),y=a.n(f),h=a(319),v=a(0),d=a.n(v),E=a(400),b=a(398),g=a(404),x=a(401),k=a(128),w=a(299),j=a(296),O=a(295),S=(a(307),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,typeData:{}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"fetchTypeData",value:function(){var e=Object(i.a)(l.a.mark(function e(){var t,a,n,r,i,o,u,s,p,m,f=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f.length>0&&void 0!==f[0]?f[0]:this.props,a=t.types,n=this.state.typeData,r=!0,i=!1,o=void 0,e.prev=5,u=a[Symbol.iterator]();case 7:if(r=(s=u.next()).done){e.next=20;break}if(p=s.value,!n[p]){e.next=11;break}return e.abrupt("continue",17);case 11:return this.setState({loading:!0}),m=Object(c.a)({},this.state.typeData),e.next=15,j.a.getTypeByName(p);case 15:m[p]=e.sent,this.setState({typeData:m});case 17:r=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),i=!0,o=e.t0;case 26:e.prev=26,e.prev=27,r||null==u.return||u.return();case 29:if(e.prev=29,!i){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:this.setState({loading:!1});case 35:case"end":return e.stop()}},e,this,[[5,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchTypeData()}},{key:"componentWillReceiveProps",value:function(e){this.fetchTypeData(e)}},{key:"calcDamageMultipliers",value:function(){var e=this.state.typeData,t=Object(h.a)(),a=!0,n=!1,r=void 0;try{for(var l,c=this.props.types[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var i=l.value;if(e[i]){var o=e[i].damage_relations,u=!0,s=!1,p=void 0;try{for(var m,f=o.double_damage_from[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var y=m.value.name;t=t.update(y,1,function(e){return 2*e})}}catch(T){s=!0,p=T}finally{try{u||null==f.return||f.return()}finally{if(s)throw p}}var v=!0,d=!1,E=void 0;try{for(var b,g=o.half_damage_from[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var x=b.value.name;t=t.update(x,1,function(e){return e/2})}}catch(T){d=!0,E=T}finally{try{v||null==g.return||g.return()}finally{if(d)throw E}}var k=!0,w=!1,j=void 0;try{for(var O,S=o.no_damage_from[Symbol.iterator]();!(k=(O=S.next()).done);k=!0){var C=O.value.name;t=t.set(C,0)}}catch(T){w=!0,j=T}finally{try{k||null==S.return||S.return()}finally{if(w)throw j}}}}}catch(T){n=!0,r=T}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t.filter(function(e){return 1!==e})}},{key:"render",value:function(){var e=this.props.types;if(this.state.loading)return d.a.createElement(t.Placeholder,null);var a=this.calcDamageMultipliers().entrySeq().map(function(e){var t=Object(n.a)(e,2);return{type:t[0],multiplier:t[1]}}).sort(function(e,t){return e.multiplier>t.multiplier?-1:e.multiplier<t.multiplier?1:e.type.localeCompare(t.type)}).toJS();return d.a.createElement(E.a,{fluid:!0},d.a.createElement(E.a.Content,null,d.a.createElement(E.a.Header,null,e.length>0&&d.a.createElement(d.a.Fragment,null,Object(O.b)(e[0]),e.slice(1).map(function(e){return d.a.createElement("span",{key:e}," \xd7 ",Object(O.b)(e))})))),d.a.createElement(E.a.Content,null,d.a.createElement(b.a,null,d.a.createElement(g.a,null,d.a.createElement(g.a.Row,null,d.a.createElement(g.a.Column,{width:8},a.filter(function(e){return e.multiplier>=1}).map(function(e){var t=e.type,a=e.multiplier;return d.a.createElement(b.a.Item,{key:t,className:"type-multiplier"},d.a.createElement(w.a,{type:t}),d.a.createElement(T,{by:a}))})),d.a.createElement(g.a.Column,{width:8},a.filter(function(e){return e.multiplier<1}).map(function(e){var t=e.type,a=e.multiplier;return d.a.createElement(b.a.Item,{key:t,className:"type-multiplier"},d.a.createElement(w.a,{type:t}),d.a.createElement(T,{by:a}))})))))))}}]),t}(d.a.Component));S.Placeholder=function(){return d.a.createElement(E.a,{fluid:!0},d.a.createElement(x.a,null,d.a.createElement(E.a.Content,null,d.a.createElement(E.a.Header,null,d.a.createElement(x.a.Header,null))),d.a.createElement(E.a.Content,null,d.a.createElement(b.a,null,d.a.createElement(g.a,null,d.a.createElement(g.a.Row,null,[0,1].map(function(e){return d.a.createElement(g.a.Column,{key:e,width:8},[0,1,2].map(function(e){return d.a.createElement(b.a.Item,{key:e,className:"type-multiplier"},d.a.createElement(w.a.Placeholder,null),d.a.createElement(T.Placeholder,null))}))})))))))};var C={0:{text:"0x",color:"black"},.25:{text:"\xbc",color:"purple",fraction:!0},.5:{text:"\xbd",color:"red",fraction:!0},1:{text:"1x"},2:{text:"2x",color:"green"},4:{text:"4x",color:"blue"}};function T(e){var t=e.by,a=C[t.toString()],n=a.text,r=void 0===n?t.toString():n,l=a.color,c=a.fraction,i=void 0!==c&&c;return d.a.createElement(k.a,{className:y()("multiplier-badge",{fraction:i}),circular:!0,size:"large",color:l},d.a.createElement("span",null,r))}T.Placeholder=function(){return d.a.createElement(x.a.Image,{className:"multiplier-badge placeholder"})}},307:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(297),r=a.n(n),l=a(298),c=a(73),i=a(74),o=a(79),u=a(75),s=a(78),p=a(0),m=a.n(p),f=a(407),y=a(403),h=a(404),v=a(386),d=a(92),E=a(399),b=a(303),g=a(299),x=a(296),k=a(295),w=a(306),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,typeList:[]},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.state.typeList){e.next=5;break}return e.next=3,x.a.getTypesList();case 3:t=e.sent,this.setState({typeList:t.results});case 5:this.checkTypes();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){this.checkTypes(e)}},{key:"handleTypes",value:function(e){var t=this;if(e<0||e>1)throw new Error("Invalid index ".concat(e));return function(a,n){var r=n.value,l=t.props,c=l.match,i=l.history,o=(c.params.types||"").split(",");o[e]=r,o=o.filter(function(e){return!!e});var u=c.path.replace(":types?",o.join(","));i.push(u)}}},{key:"render",value:function(){var e=this.state,t=e.typeList,a=e.error,n=this.getTypes();return m.a.createElement(y.a,{vertical:!0},m.a.createElement(h.a,null,m.a.createElement(h.a.Row,null,m.a.createElement(h.a.Column,null,m.a.createElement(v.a,{as:"h2"},"Defender Info"))),m.a.createElement(h.a.Row,null,m.a.createElement(h.a.Column,{width:8},m.a.createElement(O,{onChange:this.handleTypes(0),typeList:t,value:n[0],placeholder:"First Type"})),m.a.createElement(h.a.Column,{width:8},m.a.createElement(O,{onChange:this.handleTypes(1),typeList:t,value:n[1],placeholder:"Second Type"}))),m.a.createElement(h.a.Row,null,m.a.createElement(h.a.Column,null,a?m.a.createElement(b.a,{error:a}):n.length>0?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{"data-types":JSON.stringify(n)}),m.a.createElement(w.a,{types:n})):m.a.createElement(y.a,{placeholder:!0},m.a.createElement(v.a,{icon:!0},m.a.createElement(d.a,{name:"search"}),"Search for a type to begin"))))))}},{key:"getTypes",value:function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).match.params.types||"").split(",").slice(0,2).filter(function(e){return!!e})}},{key:"checkTypes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=this.state.typeList;if(a){var n=this.getTypes(t),r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value;if(!a.some(function(e){return e.name===t}))return console.error("Invalid type:",t,"not included in",a),e.setState({error:{description:m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{type:t})," isn't a valid type")}}),{v:void 0}},u=n[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s=o();if("object"===typeof s)return s.v}}catch(p){l=!0,c=p}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}this.setState({error:null})}}}]),t}(m.a.Component);function O(e){var t,a=e.value,n=e.typeList,r=e.onChange,l=e.placeholder;return t=n?n.map(function(e){return{key:e.name,text:Object(k.b)(e.name),value:e.name}}):[],a&&!t.some(function(e){return e.value===a})&&t.push({text:Object(k.b)(a),value:a}),t.sort(function(e,t){return(e.text||"").toString().localeCompare((t.text||"").toString()||"")}),m.a.createElement(E.a,{compact:!0,fluid:!0,placeholder:l,search:!0,selection:!0,clearable:!0,options:t,onChange:r,value:a})}t.default=Object(f.a)(j)}}]);
//# sourceMappingURL=5.44ce32db.chunk.js.map